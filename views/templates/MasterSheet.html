
    <div id = "page-wrapper">
      <div class="control-group">
      <!-- Button -->

    </div>
    <div class="col-md-17">
      <div class="plan">
          <div class="plan-name">
            <center>
            <h2>Master sheet</h2>
            </center>
          </div>
          <div class="table-responsive" style="color: #990000;">
                <table id="mytableCheck" class="table table-bordred table-striped"></table>    
          </div>  
        </div>
        </div>








<script type="text/javascript">


        require('../renderer.js');

        var $     = require( 'jquery' ); 
        var mysql = require('mysql');
        // var bcrypt = require('bcrypt');


        var connection = mysql.createConnection({
            host     : 'mysql.qatar.cmu.local',
            user     : 'fmbills_devuser',
            password : 'PatUmNed', // or the original password : 'apaswword'
            database : 'fmbills_dev',
            insecureAuth: true
        });

        // connect to mysql
        connection.connect(function(err) {
            // in case of error
            if(err){
                console.log(err.code);
                console.log(err.fatal);
            }
        });




        // var app = angular.module('myApp', []);


        function endConnection() {
          connection.end();
        }
        $query = "SELECT `housing`.`unitNo` , `housing`.`landLine`, `compound`.`compName`, `assignment`.`andrewId` ,`employee`.`contractType`, date_format(`assignment`.`startDate`, '%M %e, %Y') as startDate , date_format(`assignment`.`endDate`, '%M %e, %Y') as endDate, CONCAT_WS(' ', `employee`.`firstName`, `employee`.`lastName`) as empName FROM `compound` , `housing`  LEFT JOIN `assignment` ON `housing`.`landLine`= `assignment`.`landLine` LEFT JOIN `employee` ON `employee`.`andrewId`=`assignment`.`andrewId` WHERE `housing`.`compId` = `compound`.`compId` AND ((ABS(DATEDIFF(`endDate`,CURDATE()) > 0 OR `endDate` = '0000-00-00') AND  `housing`.`vacant`=1) OR `housing`.`vacant`=0) ;";
      // $query = "SELECT `housing`.`unitNo` , `housing`.`landLine`, `employee`.`andrewId`, `employee`.`contractType`, `compound`.`compName`, date_format(`assignment`.`startDate`, '%M %e, %Y') as startDate , date_format(`assignment`.`endDate`, '%M %e, %Y') as endDate ,CONCAT_WS(' ', `employee`.`firstName`, `employee`.`lastName`) AS `empName` FROM `compound` ,`employee`,`housing` LEFT JOIN `assignment` ON `housing`.`landLine`= `assignment`.`landLine` WHERE `housing`.`compId` = `compound`.`compId` AND `employee`.`andrewId`=`assignment`.`andrewId` AND ABS(DATEDIFF(`endDate`,CURDATE()) > 0 OR `endDate` = '0000-00-00');";

        // $query = "SELECT `housing`.`unitNo` , `housing`.`landLine`, `employee`.`andrewId`, `employee`.`contractType`, `compound`.`compName`, date_format(`assignment`.`startDate`, '%M %e, %Y') as startDate, date_format(`assignment`.`startDate`, '%Y-%m-%d') as startDateDisplay, date_format(`assignment`.`endDate`, '%Y-%m-%d') as endDateDisplay, date_format(`assignment`.`endDate`, '%M %e, %Y') as endDate, CONCAT_WS(' ', `employee`.`firstName`, `employee`.`lastName`) AS `empName` FROM `employee`, `compound`, `assignment` RIGHT JOIN `housing` ON `housing`.`landLine`=`assignment`.`landLine`  WHERE `housing`.`compId` = `compound`.`compId` AND `housing`.`landline` = `assignment`.`landline` AND `housing`.`landline`= `assignment`.`landline` AND `employee`.`andrewId`=`assignment`.`andrewId` AND ABS(DATEDIFF(`endDate`,CURDATE()) > 0 OR `endDate` = '0000-00-00');";

        connection.query($query, function(err, rows, fields) {
          if(err){
              console.log("An error ocurred performing the query.");
              console.log(err);
              return; 
          }
          console.log(rows)
          $('#mytableCheck').bootstrapTable({
              data: rows ,
              height: 494,
              cache: false,
              striped: true,
              pagination: true,
              pageSize: 9,
              pageList: [9,25,50,100,200],
              minimumCountColumns: 2,
              search: true,
              showRefresh:true,
              checkboxEnable: true,
              columns: [{
                field: 'state',
                title: '',
                align: 'center',
                checkbox: true
              },{
                  field: 'compName',
                  title: 'Compound',
                  sortable: true,
              },{
                  field: 'unitNo',
                  title: 'unitNo',
                  sortable: true
              }, {
                  field: 'landLine',
                  title: 'landLine',
                  sortable: true,
              }, 
              {
                  field: 'empName',
                  title: 'employee',
                  sortable: true,
              },    
               {
                  field: 'contractType',
                  title: 'Contract Type',
                  sortable: true,
              }, 
              {
                  field: 'startDate',
                  title: 'startDate',
                  sortable: true,
              },
              {
                  field: 'endDate',
                  title: 'endDate',
                  sortable: true,
              }, ]
          });
        });



</script>